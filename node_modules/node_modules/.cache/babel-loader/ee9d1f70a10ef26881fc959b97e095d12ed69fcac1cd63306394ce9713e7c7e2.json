{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nimport { SignaturePad } from '@progress/kendo-inputs-common';\nimport { Button } from '@progress/kendo-react-buttons';\nimport { classNames, createPropsContext, dispatchEvent, getTabIndex, kendoThemeMaps, Keys, noop, usePropsContext } from '@progress/kendo-react-common';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { Dialog } from '@progress/kendo-react-dialogs';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { messages, signatureClear, signatureMaximize, signatureMinimize } from '../messages';\nimport { packageMetadata } from '../package-metadata';\nimport { hasParent } from './utils';\nimport { hyperlinkOpenIcon, xIcon } from '@progress/kendo-svg-icons';\nvar DEFAULT_WIDTH = 250;\nvar DEFAULT_HEIGHT = 84;\nvar DEFAULT_POPUP_SCALE = 3;\nvar DEFAULT_EXPORT_SCALE = 2;\nvar DEFAULT_COLOR = '#000000';\nvar DEFAULT_BACKGROUND_COLOR = '#ffffff';\n/**\n * @hidden\n */\nvar isControlled = function (prop) {\n  return prop !== undefined;\n};\n/**\n * Represents the PropsContext of the `Signature` component.\n * Used for global configuration of all `Signature` instances.\n *\n * For more information, refer to the [Inputs Props Context]({% slug props-context_inputs %}) article.\n */\nexport var SignaturePropsContext = createPropsContext();\n/**\n * Represents the [KendoReact Signature component]({% slug overview_signature %}).\n */\nexport var Signature = React.forwardRef(function (directProps, target) {\n  var _a;\n  validatePackage(packageMetadata);\n  var props = usePropsContext(SignaturePropsContext, directProps);\n  var localizationService = useLocalization();\n  var elementRef = React.useRef(null);\n  var canvasRef = React.useRef(null);\n  var dialogRef = React.useRef(null);\n  var minimizeButtonRef = React.useRef(null);\n  var maximizeButtonRef = React.useRef(null);\n  var _b = React.useState(),\n    instance = _b[0],\n    setInstance = _b[1];\n  var _c = React.useState(false),\n    focused = _c[0],\n    setFocused = _c[1];\n  var _d = React.useState(false),\n    isDrawing = _d[0],\n    setIsDrawing = _d[1];\n  var _e = React.useState(),\n    stateValue = _e[0],\n    setStateValue = _e[1];\n  var _f = React.useState(),\n    popupValue = _f[0],\n    setPopupValue = _f[1];\n  var isValueControlled = isControlled(props.value);\n  var value = isValueControlled ? props.value : stateValue;\n  var _g = React.useState(false),\n    stateOpen = _g[0],\n    setStateOpen = _g[1];\n  var isOpenControlled = isControlled(props.open);\n  var open = isOpenControlled ? props.open : stateOpen;\n  var showMaximize = !(props.maximized || isDrawing || !props.maximizable || props.disabled);\n  var showMinimize = props.maximized && !isDrawing;\n  var isEmpty = !(props.value || stateValue);\n  var showClear = !(isEmpty || isDrawing || props.readOnly || props.disabled);\n  var maximizeTitle = localizationService.toLanguageString(signatureMaximize, messages[signatureMaximize]);\n  var minimizeTitle = localizationService.toLanguageString(signatureMinimize, messages[signatureMinimize]);\n  var clearTitle = localizationService.toLanguageString(signatureClear, messages[signatureClear]);\n  var popupScale = props.popupScale || DEFAULT_POPUP_SCALE;\n  var exportScale = props.exportScale || DEFAULT_EXPORT_SCALE;\n  var onValueChange = function (nextValue) {\n    setStateValue(nextValue);\n    if (props.onChange) {\n      props.onChange({\n        value: nextValue\n      });\n    }\n  };\n  var onDialogChange = function (e) {\n    instance === null || instance === void 0 ? void 0 : instance.loadImage(e.value);\n    onValueChange(e.value);\n  };\n  React.useEffect(function () {\n    if (props.value !== stateValue) {\n      setStateValue(props.value);\n      instance === null || instance === void 0 ? void 0 : instance.loadImage(props.value);\n    }\n  }, [props.value]);\n  var reset = function () {\n    instance === null || instance === void 0 ? void 0 : instance.clear();\n    onValueChange();\n  };\n  var setOpen = React.useCallback(function (nextOpen) {\n    if (!isOpenControlled) {\n      setStateOpen(nextOpen);\n    }\n  }, [isOpenControlled]);\n  var onDialogClose = function (event) {\n    var _a, _b;\n    onMinimizeClick(event);\n    (_b = ((_a = maximizeButtonRef.current) === null || _a === void 0 ? void 0 : _a.element) || canvasRef.current) === null || _b === void 0 ? void 0 : _b.focus();\n  };\n  var colorGetter = React.useCallback(function () {\n    var defaultColor = DEFAULT_COLOR;\n    if (!props.color && typeof document !== 'undefined' && elementRef.current) {\n      defaultColor = getComputedStyle(elementRef.current).color;\n    }\n    return props.color || defaultColor;\n  }, [props.color]);\n  var backgroundColorGetter = React.useCallback(function () {\n    var defaultBackgroundColor = DEFAULT_BACKGROUND_COLOR;\n    if (!props.backgroundColor && typeof document !== 'undefined' && elementRef.current) {\n      defaultBackgroundColor = getComputedStyle(elementRef.current).backgroundColor;\n    }\n    return props.backgroundColor || defaultBackgroundColor;\n  }, [props.backgroundColor]);\n  var getOptions = function () {\n    return {\n      scale: props.maximized ? props.popupScale : 1,\n      color: colorGetter(),\n      backgroundColor: backgroundColorGetter(),\n      strokeWidth: props.strokeWidth,\n      smooth: props.smooth,\n      readonly: props.readOnly\n    };\n  };\n  var exportImage = function (exportSize) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var width, height;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            width = exportSize.width, height = exportSize.height;\n            return [4 /*yield*/, instance === null || instance === void 0 ? void 0 : instance.exportImage({\n              width: width * exportScale,\n              height: height * exportScale\n            })];\n          case 1:\n            return [2 /*return*/, _a.sent()];\n        }\n      });\n    });\n  };\n  React.useEffect(function () {\n    var canvas = canvasRef.current;\n    var pad = new SignaturePad(canvas, getOptions());\n    if (value) {\n      pad.loadImage(value);\n    }\n    setInstance(pad);\n    return function () {\n      return pad.destroy();\n    };\n  }, []);\n  React.useEffect(function () {\n    instance === null || instance === void 0 ? void 0 : instance.setOptions({\n      onChange: function () {\n        return __awaiter(void 0, void 0, void 0, function () {\n          var _a;\n          return __generator(this, function (_b) {\n            switch (_b.label) {\n              case 0:\n                _a = onValueChange;\n                return [4 /*yield*/, exportImage(elementSize())];\n              case 1:\n                return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n            }\n          });\n        });\n      },\n      onDraw: function () {\n        return setIsDrawing(true);\n      },\n      onDrawEnd: function () {\n        return setIsDrawing(false);\n      }\n    });\n  }, [instance]);\n  React.useLayoutEffect(function () {\n    return instance === null || instance === void 0 ? void 0 : instance.setOptions(getOptions());\n  }, [props.readOnly, props.color, props.backgroundColor, props.strokeWidth, props.smooth]);\n  React.useEffect(function () {\n    var _a, _b;\n    var overlay = (_b = (_a = dialogRef.current) === null || _a === void 0 ? void 0 : _a.element) === null || _b === void 0 ? void 0 : _b.querySelector('.k-overlay');\n    if (!overlay) {\n      return;\n    }\n    var onOverlayClick = function () {\n      return setOpen(false);\n    };\n    overlay.addEventListener('click', onOverlayClick);\n    return function () {\n      return overlay.removeEventListener('click', onOverlayClick);\n    };\n  }, [open]);\n  React.useEffect(function () {\n    if (!open || typeof document === 'undefined') {\n      return;\n    }\n    var onDocumentKeydown = function (e) {\n      if (e.keyCode === Keys.esc) {\n        setOpen(false);\n      }\n    };\n    document.addEventListener('keydown', onDocumentKeydown);\n    return function () {\n      return document.removeEventListener('keydown', onDocumentKeydown);\n    };\n  }, [open]);\n  React.useEffect(function () {\n    var _a, _b;\n    if (!props.maximized) {\n      return;\n    }\n    (_b = (_a = minimizeButtonRef.current) === null || _a === void 0 ? void 0 : _a.element) === null || _b === void 0 ? void 0 : _b.focus();\n  }, []);\n  var focusElement = React.useCallback(function () {\n    var _a;\n    return (_a = canvasRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n  }, []);\n  var valueGetter = React.useCallback(function () {\n    return props.value;\n  }, [props.value]);\n  var nameGetter = React.useCallback(function () {\n    return props.name;\n  }, [props.name]);\n  var requiredGetter = React.useCallback(function () {\n    return props.required;\n  }, [props.required]);\n  var validityGetter = React.useCallback(function () {\n    var customError = props.validationMessage !== undefined;\n    var currentValue = valueGetter();\n    var valueMissing = !currentValue;\n    var valid = props.valid !== undefined ? props.valid : !requiredGetter() || !valueMissing;\n    return {\n      customError: customError,\n      valid: valid,\n      valueMissing: valueMissing\n    };\n  }, [props.validationMessage, props.valid, valueGetter, requiredGetter]);\n  var validityStylesGetter = React.useCallback(function () {\n    return props.validityStyles;\n  }, [props.validityStyles]);\n  var propsGetter = React.useCallback(function () {\n    return props;\n  }, [props]);\n  var getImperativeHandle = React.useCallback(function () {\n    var options = {\n      element: elementRef.current,\n      focus: focusElement\n    };\n    Object.defineProperty(options, 'name', {\n      get: nameGetter\n    });\n    Object.defineProperty(options, 'value', {\n      get: valueGetter\n    });\n    Object.defineProperty(options, 'validity', {\n      get: validityGetter\n    });\n    Object.defineProperty(options, 'validityStyles', {\n      get: validityStylesGetter\n    });\n    Object.defineProperty(options, 'required', {\n      get: requiredGetter\n    });\n    Object.defineProperty(options, 'props', {\n      get: propsGetter\n    });\n    Object.defineProperty(options, 'color', {\n      get: colorGetter\n    });\n    Object.defineProperty(options, 'backgroundColor', {\n      get: backgroundColorGetter\n    });\n    return options;\n  }, [nameGetter, valueGetter, validityGetter, validityStylesGetter, requiredGetter, focusElement, propsGetter, colorGetter, backgroundColorGetter]);\n  React.useImperativeHandle(target, getImperativeHandle);\n  var onFocus = React.useCallback(function (event) {\n    if (focused || props.maximized) {\n      return;\n    }\n    setFocused(true);\n    dispatchEvent(props.onFocus, event, getImperativeHandle(), {});\n  }, [focused, props.onFocus, getImperativeHandle]);\n  var onBlur = React.useCallback(function (event) {\n    var insideWrapper = hasParent(event.relatedTarget, elementRef.current);\n    if (insideWrapper) {\n      return;\n    }\n    setFocused(false);\n    dispatchEvent(props.onBlur, event, getImperativeHandle(), {});\n  }, [focused, props.onBlur, getImperativeHandle]);\n  var onMaximizeClick = React.useCallback(function (event) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var _a;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = setPopupValue;\n            return [4 /*yield*/, exportImage(popupSize())];\n          case 1:\n            _a.apply(void 0, [_b.sent()]);\n            setOpen(true);\n            dispatchEvent(props.onOpen, event, getImperativeHandle(), {});\n            return [2 /*return*/];\n        }\n      });\n    });\n  }, [open, isOpenControlled, props.onOpen, props.value, stateValue, getImperativeHandle]);\n  var onMinimizeClick = React.useCallback(function (event) {\n    setOpen(false);\n    dispatchEvent(props.onClose, event, getImperativeHandle(), {});\n  }, [open, isOpenControlled, props.onClose, getImperativeHandle]);\n  var onClear = function () {\n    reset();\n    focusElement();\n  };\n  var elementSize = function () {\n    var _a, _b;\n    var width = props.width || ((_a = elementRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth) || DEFAULT_WIDTH;\n    var height = props.height || ((_b = elementRef.current) === null || _b === void 0 ? void 0 : _b.offsetHeight) || DEFAULT_HEIGHT;\n    return {\n      width: width,\n      height: height\n    };\n  };\n  var popupSize = function () {\n    var _a = elementSize(),\n      width = _a.width,\n      height = _a.height;\n    return {\n      width: width * popupScale,\n      height: height * popupScale\n    };\n  };\n  var isValid = !validityStylesGetter() || validityGetter().valid;\n  return React.createElement(\"div\", {\n    ref: elementRef,\n    dir: props.dir,\n    style: __assign({\n      width: props.width,\n      height: props.height\n    }, props.style),\n    className: classNames('k-input', 'k-signature', (_a = {\n      'k-signature-maximized': props.maximized\n    }, _a[\"k-signature-\".concat(kendoThemeMaps.sizeMap[props.size] || props.size)] = props.size, _a[\"k-input-\".concat(props.fillMode)] = props.fillMode, _a[\"k-rounded-\".concat(kendoThemeMaps.roundedMap[props.rounded] || props.rounded)] = props.rounded, _a['k-invalid'] = !isValid, _a['k-required'] = props.required, _a['k-disabled'] = props.disabled, _a['k-focus'] = focused, _a), props.className),\n    onFocus: onFocus,\n    onBlur: onBlur\n  }, React.createElement(\"div\", {\n    className: 'k-signature-canvas',\n    ref: canvasRef,\n    tabIndex: getTabIndex(props.tabIndex, props.disabled),\n    role: \"img\",\n    id: props.id,\n    \"aria-label\": props.ariaLabel,\n    \"aria-labelledby\": props.ariaLabelledBy,\n    \"aria-describedby\": props.ariaDescribedBy,\n    \"aria-disabled\": props.disabled ? 'true' : undefined\n  }), React.createElement(\"div\", {\n    className: 'k-signature-actions k-signature-actions-top'\n  }, showMaximize && React.createElement(Button, {\n    className: 'k-signature-action k-signature-maximize',\n    ref: maximizeButtonRef,\n    icon: 'hyperlink-open',\n    svgIcon: hyperlinkOpenIcon,\n    fillMode: 'flat',\n    size: props.size,\n    onClick: onMaximizeClick,\n    \"aria-label\": maximizeTitle,\n    title: maximizeTitle\n  }), showMinimize && React.createElement(Button, {\n    className: 'k-signature-action k-signature-minimize k-rotate-180',\n    ref: minimizeButtonRef,\n    icon: 'hyperlink-open',\n    svgIcon: hyperlinkOpenIcon,\n    fillMode: 'flat',\n    size: props.size,\n    onClick: onMinimizeClick,\n    \"aria-label\": minimizeTitle,\n    title: minimizeTitle\n  })), !props.hideLine && React.createElement(\"div\", {\n    className: 'k-signature-line',\n    style: {\n      zIndex: 2,\n      pointerEvents: 'none'\n    }\n  }), React.createElement(\"div\", {\n    className: 'k-signature-actions k-signature-actions-bottom'\n  }, showClear && React.createElement(Button, {\n    className: 'k-signature-action k-signature-clear',\n    icon: 'x',\n    svgIcon: xIcon,\n    fillMode: 'flat',\n    size: props.size,\n    onClick: onClear,\n    \"aria-label\": clearTitle,\n    title: clearTitle\n  })), open && React.createElement(Dialog, {\n    ref: dialogRef\n  }, React.createElement(Signature, __assign({}, props, popupSize(), {\n    value: popupValue,\n    maximized: true,\n    exportScale: 1 / popupScale * exportScale,\n    open: false,\n    onChange: onDialogChange,\n    onClose: onDialogClose\n  }))));\n});\nSignature.propTypes = {\n  value: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  tabIndex: PropTypes.number,\n  dir: PropTypes.string,\n  ariaDescribedBy: PropTypes.string,\n  ariaLabelledBy: PropTypes.string,\n  ariaLabel: PropTypes.string,\n  readOnly: PropTypes.bool,\n  disabled: PropTypes.bool,\n  validationMessage: PropTypes.string,\n  required: PropTypes.bool,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  size: PropTypes.oneOf([null, 'small', 'medium', 'large']),\n  rounded: PropTypes.oneOf([null, 'small', 'medium', 'large']),\n  fillMode: PropTypes.oneOf([null, 'solid', 'flat', 'outline'])\n};\nSignature.displayName = 'KendoSignature';\nSignature.defaultProps = {\n  strokeWidth: 1,\n  smooth: false,\n  popupScale: DEFAULT_POPUP_SCALE,\n  exportScale: DEFAULT_EXPORT_SCALE,\n  maximizable: true,\n  disabled: false,\n  required: false,\n  validityStyles: true,\n  onChange: function (_) {\n    return noop;\n  },\n  onFocus: function (_) {\n    return noop;\n  },\n  onBlur: function (_) {\n    return noop;\n  },\n  onOpen: function (_) {\n    return noop;\n  },\n  onClose: function (_) {\n    return noop;\n  },\n  size: 'medium',\n  rounded: 'medium',\n  fillMode: 'solid'\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","SignaturePad","Button","classNames","createPropsContext","dispatchEvent","getTabIndex","kendoThemeMaps","Keys","noop","usePropsContext","validatePackage","Dialog","useLocalization","PropTypes","React","messages","signatureClear","signatureMaximize","signatureMinimize","packageMetadata","hasParent","hyperlinkOpenIcon","xIcon","DEFAULT_WIDTH","DEFAULT_HEIGHT","DEFAULT_POPUP_SCALE","DEFAULT_EXPORT_SCALE","DEFAULT_COLOR","DEFAULT_BACKGROUND_COLOR","isControlled","prop","undefined","SignaturePropsContext","Signature","forwardRef","directProps","target","_a","props","localizationService","elementRef","useRef","canvasRef","dialogRef","minimizeButtonRef","maximizeButtonRef","_b","useState","instance","setInstance","_c","focused","setFocused","_d","isDrawing","setIsDrawing","_e","stateValue","setStateValue","_f","popupValue","setPopupValue","isValueControlled","_g","stateOpen","setStateOpen","isOpenControlled","open","showMaximize","maximized","maximizable","disabled","showMinimize","isEmpty","showClear","readOnly","maximizeTitle","toLanguageString","minimizeTitle","clearTitle","popupScale","exportScale","onValueChange","nextValue","onChange","onDialogChange","loadImage","useEffect","reset","clear","setOpen","useCallback","nextOpen","onDialogClose","event","onMinimizeClick","current","element","focus","colorGetter","defaultColor","color","document","getComputedStyle","backgroundColorGetter","defaultBackgroundColor","backgroundColor","getOptions","scale","strokeWidth","smooth","readonly","exportImage","exportSize","width","height","canvas","pad","destroy","setOptions","elementSize","onDraw","onDrawEnd","useLayoutEffect","overlay","querySelector","onOverlayClick","addEventListener","removeEventListener","onDocumentKeydown","keyCode","esc","focusElement","valueGetter","nameGetter","name","requiredGetter","required","validityGetter","customError","validationMessage","currentValue","valueMissing","valid","validityStylesGetter","validityStyles","propsGetter","getImperativeHandle","options","defineProperty","get","useImperativeHandle","onFocus","onBlur","insideWrapper","relatedTarget","onMaximizeClick","popupSize","onOpen","onClose","onClear","offsetWidth","offsetHeight","isValid","createElement","ref","dir","style","className","concat","sizeMap","size","fillMode","roundedMap","rounded","tabIndex","role","id","ariaLabel","ariaLabelledBy","ariaDescribedBy","icon","svgIcon","onClick","title","hideLine","zIndex","pointerEvents","propTypes","string","number","bool","func","oneOf","displayName","defaultProps"],"sources":["C:/capgemini/React/CRUD/burger/node_modules/@progress/kendo-react-inputs/dist/es/signature/Signature.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { SignaturePad } from '@progress/kendo-inputs-common';\nimport { Button } from '@progress/kendo-react-buttons';\nimport { classNames, createPropsContext, dispatchEvent, getTabIndex, kendoThemeMaps, Keys, noop, usePropsContext } from '@progress/kendo-react-common';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { Dialog } from '@progress/kendo-react-dialogs';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { messages, signatureClear, signatureMaximize, signatureMinimize } from '../messages';\nimport { packageMetadata } from '../package-metadata';\nimport { hasParent } from './utils';\nimport { hyperlinkOpenIcon, xIcon } from '@progress/kendo-svg-icons';\nvar DEFAULT_WIDTH = 250;\nvar DEFAULT_HEIGHT = 84;\nvar DEFAULT_POPUP_SCALE = 3;\nvar DEFAULT_EXPORT_SCALE = 2;\nvar DEFAULT_COLOR = '#000000';\nvar DEFAULT_BACKGROUND_COLOR = '#ffffff';\n/**\n * @hidden\n */\nvar isControlled = function (prop) {\n    return prop !== undefined;\n};\n/**\n * Represents the PropsContext of the `Signature` component.\n * Used for global configuration of all `Signature` instances.\n *\n * For more information, refer to the [Inputs Props Context]({% slug props-context_inputs %}) article.\n */\nexport var SignaturePropsContext = createPropsContext();\n/**\n * Represents the [KendoReact Signature component]({% slug overview_signature %}).\n */\nexport var Signature = React.forwardRef(function (directProps, target) {\n    var _a;\n    validatePackage(packageMetadata);\n    var props = usePropsContext(SignaturePropsContext, directProps);\n    var localizationService = useLocalization();\n    var elementRef = React.useRef(null);\n    var canvasRef = React.useRef(null);\n    var dialogRef = React.useRef(null);\n    var minimizeButtonRef = React.useRef(null);\n    var maximizeButtonRef = React.useRef(null);\n    var _b = React.useState(), instance = _b[0], setInstance = _b[1];\n    var _c = React.useState(false), focused = _c[0], setFocused = _c[1];\n    var _d = React.useState(false), isDrawing = _d[0], setIsDrawing = _d[1];\n    var _e = React.useState(), stateValue = _e[0], setStateValue = _e[1];\n    var _f = React.useState(), popupValue = _f[0], setPopupValue = _f[1];\n    var isValueControlled = isControlled(props.value);\n    var value = isValueControlled ? props.value : stateValue;\n    var _g = React.useState(false), stateOpen = _g[0], setStateOpen = _g[1];\n    var isOpenControlled = isControlled(props.open);\n    var open = isOpenControlled ? props.open : stateOpen;\n    var showMaximize = !(props.maximized || isDrawing || !props.maximizable || props.disabled);\n    var showMinimize = props.maximized && !isDrawing;\n    var isEmpty = !(props.value || stateValue);\n    var showClear = !(isEmpty || isDrawing || props.readOnly || props.disabled);\n    var maximizeTitle = localizationService.toLanguageString(signatureMaximize, messages[signatureMaximize]);\n    var minimizeTitle = localizationService.toLanguageString(signatureMinimize, messages[signatureMinimize]);\n    var clearTitle = localizationService.toLanguageString(signatureClear, messages[signatureClear]);\n    var popupScale = props.popupScale || DEFAULT_POPUP_SCALE;\n    var exportScale = props.exportScale || DEFAULT_EXPORT_SCALE;\n    var onValueChange = function (nextValue) {\n        setStateValue(nextValue);\n        if (props.onChange) {\n            props.onChange({ value: nextValue });\n        }\n    };\n    var onDialogChange = function (e) {\n        instance === null || instance === void 0 ? void 0 : instance.loadImage(e.value);\n        onValueChange(e.value);\n    };\n    React.useEffect(function () {\n        if (props.value !== stateValue) {\n            setStateValue(props.value);\n            instance === null || instance === void 0 ? void 0 : instance.loadImage(props.value);\n        }\n    }, [props.value]);\n    var reset = function () {\n        instance === null || instance === void 0 ? void 0 : instance.clear();\n        onValueChange();\n    };\n    var setOpen = React.useCallback(function (nextOpen) {\n        if (!isOpenControlled) {\n            setStateOpen(nextOpen);\n        }\n    }, [isOpenControlled]);\n    var onDialogClose = function (event) {\n        var _a, _b;\n        onMinimizeClick(event);\n        (_b = (((_a = maximizeButtonRef.current) === null || _a === void 0 ? void 0 : _a.element) || canvasRef.current)) === null || _b === void 0 ? void 0 : _b.focus();\n    };\n    var colorGetter = React.useCallback(function () {\n        var defaultColor = DEFAULT_COLOR;\n        if (!props.color && typeof document !== 'undefined' && elementRef.current) {\n            defaultColor = getComputedStyle(elementRef.current).color;\n        }\n        return props.color || defaultColor;\n    }, [props.color]);\n    var backgroundColorGetter = React.useCallback(function () {\n        var defaultBackgroundColor = DEFAULT_BACKGROUND_COLOR;\n        if (!props.backgroundColor && typeof document !== 'undefined' && elementRef.current) {\n            defaultBackgroundColor = getComputedStyle(elementRef.current).backgroundColor;\n        }\n        return props.backgroundColor || defaultBackgroundColor;\n    }, [props.backgroundColor]);\n    var getOptions = function () {\n        return {\n            scale: props.maximized ? props.popupScale : 1,\n            color: colorGetter(),\n            backgroundColor: backgroundColorGetter(),\n            strokeWidth: props.strokeWidth,\n            smooth: props.smooth,\n            readonly: props.readOnly\n        };\n    };\n    var exportImage = function (exportSize) { return __awaiter(void 0, void 0, void 0, function () {\n        var width, height;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    width = exportSize.width, height = exportSize.height;\n                    return [4 /*yield*/, (instance === null || instance === void 0 ? void 0 : instance.exportImage({\n                            width: width * exportScale,\n                            height: height * exportScale\n                        }))];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    }); };\n    React.useEffect(function () {\n        var canvas = canvasRef.current;\n        var pad = new SignaturePad(canvas, getOptions());\n        if (value) {\n            pad.loadImage(value);\n        }\n        setInstance(pad);\n        return function () { return pad.destroy(); };\n    }, []);\n    React.useEffect(function () {\n        instance === null || instance === void 0 ? void 0 : instance.setOptions({\n            onChange: function () { return __awaiter(void 0, void 0, void 0, function () { var _a; return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = onValueChange;\n                        return [4 /*yield*/, exportImage(elementSize())];\n                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];\n                }\n            }); }); },\n            onDraw: function () { return setIsDrawing(true); },\n            onDrawEnd: function () { return setIsDrawing(false); }\n        });\n    }, [instance]);\n    React.useLayoutEffect(function () { return instance === null || instance === void 0 ? void 0 : instance.setOptions(getOptions()); }, [props.readOnly, props.color, props.backgroundColor, props.strokeWidth, props.smooth]);\n    React.useEffect(function () {\n        var _a, _b;\n        var overlay = (_b = (_a = dialogRef.current) === null || _a === void 0 ? void 0 : _a.element) === null || _b === void 0 ? void 0 : _b.querySelector('.k-overlay');\n        if (!overlay) {\n            return;\n        }\n        var onOverlayClick = function () { return setOpen(false); };\n        overlay.addEventListener('click', onOverlayClick);\n        return function () { return overlay.removeEventListener('click', onOverlayClick); };\n    }, [open]);\n    React.useEffect(function () {\n        if (!open || typeof document === 'undefined') {\n            return;\n        }\n        var onDocumentKeydown = function (e) {\n            if (e.keyCode === Keys.esc) {\n                setOpen(false);\n            }\n        };\n        document.addEventListener('keydown', onDocumentKeydown);\n        return function () { return document.removeEventListener('keydown', onDocumentKeydown); };\n    }, [open]);\n    React.useEffect(function () {\n        var _a, _b;\n        if (!props.maximized) {\n            return;\n        }\n        (_b = (_a = minimizeButtonRef.current) === null || _a === void 0 ? void 0 : _a.element) === null || _b === void 0 ? void 0 : _b.focus();\n    }, []);\n    var focusElement = React.useCallback(function () { var _a; return (_a = canvasRef.current) === null || _a === void 0 ? void 0 : _a.focus(); }, []);\n    var valueGetter = React.useCallback(function () { return props.value; }, [props.value]);\n    var nameGetter = React.useCallback(function () { return props.name; }, [props.name]);\n    var requiredGetter = React.useCallback(function () { return props.required; }, [props.required]);\n    var validityGetter = React.useCallback(function () {\n        var customError = props.validationMessage !== undefined;\n        var currentValue = valueGetter();\n        var valueMissing = !currentValue;\n        var valid = props.valid !== undefined ?\n            props.valid :\n            (!requiredGetter() || !valueMissing);\n        return {\n            customError: customError,\n            valid: valid,\n            valueMissing: valueMissing\n        };\n    }, [props.validationMessage, props.valid, valueGetter, requiredGetter]);\n    var validityStylesGetter = React.useCallback(function () {\n        return props.validityStyles;\n    }, [props.validityStyles]);\n    var propsGetter = React.useCallback(function () {\n        return props;\n    }, [props]);\n    var getImperativeHandle = React.useCallback(function () {\n        var options = {\n            element: elementRef.current,\n            focus: focusElement\n        };\n        Object.defineProperty(options, 'name', { get: nameGetter });\n        Object.defineProperty(options, 'value', { get: valueGetter });\n        Object.defineProperty(options, 'validity', { get: validityGetter });\n        Object.defineProperty(options, 'validityStyles', { get: validityStylesGetter });\n        Object.defineProperty(options, 'required', { get: requiredGetter });\n        Object.defineProperty(options, 'props', { get: propsGetter });\n        Object.defineProperty(options, 'color', { get: colorGetter });\n        Object.defineProperty(options, 'backgroundColor', { get: backgroundColorGetter });\n        return options;\n    }, [nameGetter, valueGetter, validityGetter, validityStylesGetter, requiredGetter, focusElement, propsGetter, colorGetter, backgroundColorGetter]);\n    React.useImperativeHandle(target, getImperativeHandle);\n    var onFocus = React.useCallback(function (event) {\n        if (focused || props.maximized) {\n            return;\n        }\n        setFocused(true);\n        dispatchEvent(props.onFocus, event, getImperativeHandle(), {});\n    }, [focused, props.onFocus, getImperativeHandle]);\n    var onBlur = React.useCallback(function (event) {\n        var insideWrapper = hasParent(event.relatedTarget, elementRef.current);\n        if (insideWrapper) {\n            return;\n        }\n        setFocused(false);\n        dispatchEvent(props.onBlur, event, getImperativeHandle(), {});\n    }, [focused, props.onBlur, getImperativeHandle]);\n    var onMaximizeClick = React.useCallback(function (event) { return __awaiter(void 0, void 0, void 0, function () {\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _a = setPopupValue;\n                    return [4 /*yield*/, exportImage(popupSize())];\n                case 1:\n                    _a.apply(void 0, [_b.sent()]);\n                    setOpen(true);\n                    dispatchEvent(props.onOpen, event, getImperativeHandle(), {});\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [open, isOpenControlled, props.onOpen, props.value, stateValue, getImperativeHandle]);\n    var onMinimizeClick = React.useCallback(function (event) {\n        setOpen(false);\n        dispatchEvent(props.onClose, event, getImperativeHandle(), {});\n    }, [open, isOpenControlled, props.onClose, getImperativeHandle]);\n    var onClear = function () {\n        reset();\n        focusElement();\n    };\n    var elementSize = function () {\n        var _a, _b;\n        var width = props.width || ((_a = elementRef.current) === null || _a === void 0 ? void 0 : _a.offsetWidth) || DEFAULT_WIDTH;\n        var height = props.height || ((_b = elementRef.current) === null || _b === void 0 ? void 0 : _b.offsetHeight) || DEFAULT_HEIGHT;\n        return {\n            width: width,\n            height: height\n        };\n    };\n    var popupSize = function () {\n        var _a = elementSize(), width = _a.width, height = _a.height;\n        return {\n            width: width * popupScale,\n            height: height * popupScale\n        };\n    };\n    var isValid = !validityStylesGetter() || validityGetter().valid;\n    return (React.createElement(\"div\", { ref: elementRef, dir: props.dir, style: __assign({ width: props.width, height: props.height }, props.style), className: classNames('k-input', 'k-signature', (_a = {\n                'k-signature-maximized': props.maximized\n            },\n            _a[\"k-signature-\".concat(kendoThemeMaps.sizeMap[props.size] || props.size)] = props.size,\n            _a[\"k-input-\".concat(props.fillMode)] = props.fillMode,\n            _a[\"k-rounded-\".concat(kendoThemeMaps.roundedMap[props.rounded] || props.rounded)] = props.rounded,\n            _a['k-invalid'] = !isValid,\n            _a['k-required'] = props.required,\n            _a['k-disabled'] = props.disabled,\n            _a['k-focus'] = focused,\n            _a), props.className), onFocus: onFocus, onBlur: onBlur },\n        React.createElement(\"div\", { className: 'k-signature-canvas', ref: canvasRef, tabIndex: getTabIndex(props.tabIndex, props.disabled), role: \"img\", id: props.id, \"aria-label\": props.ariaLabel, \"aria-labelledby\": props.ariaLabelledBy, \"aria-describedby\": props.ariaDescribedBy, \"aria-disabled\": props.disabled ? 'true' : undefined }),\n        React.createElement(\"div\", { className: 'k-signature-actions k-signature-actions-top' },\n            showMaximize && (React.createElement(Button, { className: 'k-signature-action k-signature-maximize', ref: maximizeButtonRef, icon: 'hyperlink-open', svgIcon: hyperlinkOpenIcon, fillMode: 'flat', size: props.size, onClick: onMaximizeClick, \"aria-label\": maximizeTitle, title: maximizeTitle })),\n            showMinimize && (React.createElement(Button, { className: 'k-signature-action k-signature-minimize k-rotate-180', ref: minimizeButtonRef, icon: 'hyperlink-open', svgIcon: hyperlinkOpenIcon, fillMode: 'flat', size: props.size, onClick: onMinimizeClick, \"aria-label\": minimizeTitle, title: minimizeTitle }))),\n        !props.hideLine && (React.createElement(\"div\", { className: 'k-signature-line', style: { zIndex: 2, pointerEvents: 'none' } })),\n        React.createElement(\"div\", { className: 'k-signature-actions k-signature-actions-bottom' }, showClear && (React.createElement(Button, { className: 'k-signature-action k-signature-clear', icon: 'x', svgIcon: xIcon, fillMode: 'flat', size: props.size, onClick: onClear, \"aria-label\": clearTitle, title: clearTitle }))),\n        open && (React.createElement(Dialog, { ref: dialogRef },\n            React.createElement(Signature, __assign({}, props, popupSize(), { value: popupValue, maximized: true, exportScale: (1 / popupScale) * exportScale, open: false, onChange: onDialogChange, onClose: onDialogClose }))))));\n});\nSignature.propTypes = {\n    value: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    tabIndex: PropTypes.number,\n    dir: PropTypes.string,\n    ariaDescribedBy: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaLabel: PropTypes.string,\n    readOnly: PropTypes.bool,\n    disabled: PropTypes.bool,\n    validationMessage: PropTypes.string,\n    required: PropTypes.bool,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onOpen: PropTypes.func,\n    onClose: PropTypes.func,\n    size: PropTypes.oneOf([null, 'small', 'medium', 'large']),\n    rounded: PropTypes.oneOf([null, 'small', 'medium', 'large']),\n    fillMode: PropTypes.oneOf([null, 'solid', 'flat', 'outline'])\n};\nSignature.displayName = 'KendoSignature';\nSignature.defaultProps = {\n    strokeWidth: 1,\n    smooth: false,\n    popupScale: DEFAULT_POPUP_SCALE,\n    exportScale: DEFAULT_EXPORT_SCALE,\n    maximizable: true,\n    disabled: false,\n    required: false,\n    validityStyles: true,\n    onChange: function (_) { return noop; },\n    onFocus: function (_) { return noop; },\n    onBlur: function (_) { return noop; },\n    onOpen: function (_) { return noop; },\n    onClose: function (_) { return noop; },\n    size: 'medium',\n    rounded: 'medium',\n    fillMode: 'solid'\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}